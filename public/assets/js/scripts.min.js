let timeoutHandler=null;function formSubmit(e,t,a=null,n=null,o=null,i=null,r="POST"){e.preventDefault();let s=new FormData(t[0]),l=t.attr("action"),d=$(e.originalEvent.submitter),c=t.find(".message-area").length?t.find(".message-area"):$(".message-area");ajaxRequest(l,s,(function(){d.removeClass(d.attr("data-active-icon")).addClass(d.attr("data-alt-icon")).prop("disabled",!0),t.parent().append($('<div class="mbackdrop loading rounded" id="jsFormSubmitBackdrop"></div>').css({"background-color":"rgb(0, 0, 0, 0.125)",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"998"}).hide().show("fade")),a&&a()}),(function(e){e.reload?window.location.reload():e.redirect?window.location.href=e.redirect:(e.message&&addAlert($(e.message),c),e.errors&&addFormErrors(t,e.errors),n&&n(e))}),(function(e){if(d.addClass(d.attr("data-active-icon")).removeClass(d.attr("data-alt-icon")).prop("disabled",!1),t.parent().find("#jsFormSubmitBackdrop").hide("fade",(function(){$(this).remove()})),e.responseJSON){let a=e.responseJSON.errors??null;a&&a.message&&addAlert($(a.message[0]),c),a&&addFormErrors(t,a)}else addAlert($('<div class="alert alert-danger text-center">\n                                <small>\n                                    Sem resposta do servidor. Verifique sua coenx√£o ou se isso persistir entre em contato.\n                                </small>\n                            </div>'),c);o&&o(e)}),(function(e){i&&i(e)}))}function ajaxRequest(e,t=null,a=null,n=null,o=null,i=null,r="POST"){$.ajax({type:r,url:e,data:t,dataType:"json",contentType:!1,processData:!1,timeout:2e4,beforeSend:function(){a&&a()},success:function(e){n&&n(e)},complete:function(e){o&&o(e)},error:function(e){i&&i(e)}})}function addFormErrors(e,t){let a=e.find("input, select, textarea"),n=t??[];a.length&&$.each(a,(function(e,t){let a=$(t),o=a.attr("name");if(n[o]){let e=a.parent().find(".invalid-feedback");e.length?e.html(n[o]):a.parent().append(`<div class="invalid-feedback">${n[o]}</div>`),a.addClass("is-invalid")}else a.removeClass("is-invalid").parent().find(".invalid-feedback").hide("fade",(function(){$(this).remove()}))}))}function addAlert(e,t=null){(t??$(".message-area")).html(e),showAlert(e)}function showAlert(e){e.hasClass("alert-float")?e.show("blind",(function(){$(this).effect("bounce")})):e.show("fade"),(timer=e.attr("data-timer"))&&(timeoutHandler&&clearTimeout(timeoutHandler),alertRunTimer(e))}function removeAlert(e){e.hasClass("alert-float")?e.effect("bounce",(function(){$(this).hide("blind",(function(){$(this).remove()}))})):e.hide("fade",(function(){$(this).remove()}))}function alertRunTimer(e){timeoutHandler=setTimeout((function(){removeAlert(e)}),1e3*timer)}$((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")}}),$("[data-toggle='tooltip']").tooltip(),$(document).on("submit",".jsFormSubmit",(function(e){formSubmit(e,$(this))}));let e=$(".message-area");$.each(e,(function(e,t){let a=$(t).find(".alert");0==e&&a.length?showAlert(a):a.remove()})),$(".alert").on("close.bs.alert",(function(){timeoutHandler&&clearTimeout(timeoutHandler)}))})),$((function(){let e=$(".jsModalConfirmation");$(".jsButtonConfirmation").on("click",(function(t){t.preventDefault();let a=$(this);e.find(".jsFormSubmit").attr("action",a.attr("data-action")),e.find(".confirmation-message").addClass(`text-${a.attr("data-type")}`).html(a.attr("data-message")),e.find(".confirmation-btn").addClass(`btn-${a.attr("data-type")}`),e.modal()})),$(e).on("hidden.bs.modal",(function(t){e.find(".message-area").html(""),e.find(".jsFormSubmit").attr("action",""),e.find(".confirmation-message").removeClass("text-danger text-success text-info text-warning text-secondary").html(""),e.find(".confirmation-btn").removeClass("btn-danger btn-success btn-info btn-warning btn-secondary")}))}));
